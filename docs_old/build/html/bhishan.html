
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>bhishan package &#8212; Module: bhishan 1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="bhishan" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="bhishan"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Module: bhishan 1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bhishan-package">
<h1>bhishan package<a class="headerlink" href="#bhishan-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subs">
<h2>Subs<a class="headerlink" href="#subs" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-bhishan.bp">
<span id="bhishan-bp"></span><h2>bhishan.bp<a class="headerlink" href="#module-bhishan.bp" title="Permalink to this headline">¶</a></h2>
<p>This is a private module of Bhishan Poudel. It is only used for my own
purposes and is not intended to be public.</p>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bhishan</span> <span class="kn">import</span> <span class="n">bp</span>
<span class="n">bp</span><span class="o">.</span><span class="n">show_method_attributes</span><span class="p">(</span><span class="n">bp</span><span class="p">)</span>
<span class="n">help</span><span class="p">(</span><span class="n">bp</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-bhishan.ds_ds">
<span id="bhishan-ds-ds"></span><h2>bhishan.ds_ds<a class="headerlink" href="#module-bhishan.ds_ds" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ds_ds.adjustedR2">
<code class="sig-prename descclassname">bhishan.ds_ds.</code><code class="sig-name descname">adjustedR2</code><span class="sig-paren">(</span><em class="sig-param">r2</em>, <em class="sig-param">nrows</em>, <em class="sig-param">kcols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_ds.html#adjustedR2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_ds.adjustedR2" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate adjusted R-squared.</p>
<p>R-squared metric increases with number of features used.
To get more robust model comparison metric, we can use
adjusted R-squared metric which penalizes larger number of featrues.</p>
<p>(R-adj)^2 = R^2 - (k-1)/(n-k) * (1-R^2)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r2</strong> (<em>float</em>) – The r-squared value.</p></li>
<li><p><strong>nrows</strong> (<em>int</em>) – Total number of observations.</p></li>
<li><p><strong>kcols</strong> (<em>int</em>) – Total number of parameters.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_ds.freq_count">
<code class="sig-prename descclassname">bhishan.ds_ds.</code><code class="sig-name descname">freq_count</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">nlargest=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_ds.html#freq_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_ds.freq_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the item frequency tuple for each unique elements of columns.</p>
<blockquote>
<div><dl class="simple">
<dt>df: pandas.DataFrame</dt><dd><p>Pandas Dataframe.</p>
</dd>
<dt>nlargest: int</dt><dd><p>Integer to get the n-largest values.</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cols_cat_small</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;waterfront&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">]</span>

<span class="n">dftmp</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">cols_cat_small</span><span class="p">]</span>
<span class="n">df_freq</span> <span class="o">=</span> <span class="n">freq_count</span><span class="p">(</span><span class="n">dftmp</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_ds.get_column_descriptions">
<code class="sig-prename descclassname">bhishan.ds_ds.</code><code class="sig-name descname">get_column_descriptions</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">column_list=None</em>, <em class="sig-param">style=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_ds.html#get_column_descriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_ds.get_column_descriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get nice table of columns description of given dataframe.</p>
<blockquote>
<div><dl class="simple">
<dt>df: pandas.DataFrame</dt><dd><p>Input dataframe.</p>
</dd>
<dt>column_list: list</dt><dd><p>list of feature names</p>
</dd>
<dt>style: bool</dt><dd><p>Whether to render the dataframe with style or not.</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bhishan.util_ds</span> <span class="kn">import</span> <span class="n">get_column_descriptions</span>
<span class="n">get_column_descriptions</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_ds.multiple_linear_regression">
<code class="sig-prename descclassname">bhishan.ds_ds.</code><code class="sig-name descname">multiple_linear_regression</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">features</em>, <em class="sig-param">target</em>, <em class="sig-param">model</em>, <em class="sig-param">cv=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_ds.html#multiple_linear_regression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_ds.multiple_linear_regression" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiple Linear Regression Modelling using given model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input dataframe.</p></li>
<li><p><strong>features</strong> (<em>list</em>) – list of feature names</p></li>
<li><p><strong>target</strong> (<em>string</em>) – target name.</p></li>
<li><p><strong>model</strong> (<em>model</em>) – sklearn model e.g. sklearn.ensemble.RandomForestRegressor</p></li>
<li><p><strong>cv</strong> (<em>int</em>) – cross-validation</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_ds.print_df_eval">
<code class="sig-prename descclassname">bhishan.ds_ds.</code><code class="sig-name descname">print_df_eval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_ds.html#print_df_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_ds.print_df_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a data frame to store the model evalution.</p>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ds_json">
<span id="bhishan-ds-json"></span><h2>bhishan.ds_json<a class="headerlink" href="#module-bhishan.ds_json" title="Permalink to this headline">¶</a></h2>
<p>Utility function for json.</p>
<dl class="function">
<dt id="bhishan.ds_json.parse_json_col">
<code class="sig-prename descclassname">bhishan.ds_json.</code><code class="sig-name descname">parse_json_col</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">json_col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_json.html#parse_json_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_json.parse_json_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Explode the json column and attach to original dataframe.</p>
<blockquote>
<div><dl class="simple">
<dt>df: pandas.DataFrame</dt><dd><p>input dataframe</p>
</dd>
<dt>json_col: string</dt><dd><p>Column name of dataframe which contains json objects.</p>
</dd>
</dl>
</div></blockquote>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_colwidth</span><span class="o">=</span><span class="mi">999</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&quot;&quot;{&quot;analytics&quot;: {&quot;device&quot;: &quot;Desktop&quot;,</span>
<span class="s2">                                                &quot;email_open_rate_pct&quot;: 14.0},</span>
<span class="s2">                                &quot;industry&quot;: &quot;Construction&quot;,</span>
<span class="s2">                                &quot;time_in_product_mins&quot;: 62.45}&quot;&quot;&quot;</span><span class="p">]</span>
                <span class="p">})</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ds_speed">
<span id="bhishan-ds-speed"></span><h2>bhishan.ds_speed<a class="headerlink" href="#module-bhishan.ds_speed" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ds_speed.optimize_memory">
<code class="sig-prename descclassname">bhishan.ds_speed.</code><code class="sig-name descname">optimize_memory</code><span class="sig-paren">(</span><em class="sig-param">df, datetime_features=[None]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_speed.html#optimize_memory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_speed.optimize_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce the memory of pandas dataframe.</p>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ds_stats">
<span id="bhishan-ds-stats"></span><h2>bhishan.ds_stats<a class="headerlink" href="#module-bhishan.ds_stats" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ds_stats.find_corr">
<code class="sig-prename descclassname">bhishan.ds_stats.</code><code class="sig-name descname">find_corr</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">target</em>, <em class="sig-param">method='spearman'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_stats.html#find_corr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_stats.find_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between multiple columns with target column.</p>
<p>Available methods:
method : {‘pearson’, ‘kendall’, ‘spearman’}</p>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_stats.partial_corr">
<code class="sig-prename descclassname">bhishan.ds_stats.</code><code class="sig-name descname">partial_corr</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_stats.html#partial_corr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_stats.partial_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Partial correlation coefficent among multiple columns of given array.</p>
</dd></dl>

<dl class="function">
<dt id="bhishan.ds_stats.point_biserial_correlation">
<code class="sig-prename descclassname">bhishan.ds_stats.</code><code class="sig-name descname">point_biserial_correlation</code><span class="sig-paren">(</span><em class="sig-param">col1</em>, <em class="sig-param">col2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ds_stats.html#point_biserial_correlation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ds_stats.point_biserial_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Point biserial correlation between two arrays.
Ref: <a class="reference external" href="https://www.kaggle.com/harlfoxem/house-price-prediction-part-1">https://www.kaggle.com/harlfoxem/house-price-prediction-part-1</a></p>
<p>Assumptions of point-biserial correlation:
- There should be no significant outliers in the two groups of the
dichotomous variable in terms of the continuous variable.
- There should be homogeneity of variances.
- The continuous variable should be approximately normally distributed
for each group of the dichotomous variable.</p>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ml_model_eval">
<span id="bhishan-ml-model-eval"></span><h2>bhishan.ml_model_eval<a class="headerlink" href="#module-bhishan.ml_model_eval" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ml_model_eval.get_binary_classification_report">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">get_binary_classification_report</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em>, <em class="sig-param">desc=''</em>, <em class="sig-param">df_clf_report=None</em>, <em class="sig-param">style_col='Recall_1'</em>, <em class="sig-param">show=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#get_binary_classification_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.get_binary_classification_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Get binary classification report.</p>
<blockquote>
<div><dl class="simple">
<dt>model_name: string</dt><dd><p>Name of the model</p>
</dd>
<dt>ytest: np.array</dt><dd><p>Test response variable</p>
</dd>
<dt>ypreds: np.array</dt><dd><p>Test response predictions.</p>
</dd>
<dt>desc: string</dt><dd><p>Description of the model. (string sentence)</p>
</dd>
<dt>df_clf_report: pandas.DataFrame</dt><dd><p>Pandas dataframe for model classification report.</p>
</dd>
<dt>style_col: string</dt><dd><p>Name of the evaluation output column to style.</p>
</dd>
<dt>show: bool</dt><dd><p>Whether to show or not the styled dataframe</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">This is a helper function intended to be used in Jupyter notebooks.</span>

<span class="sd">This function displays binary classification report</span>
<span class="sd">(precision, recall, and f1-score)</span>
<span class="sd">for all the classes and it also gives the number of supports</span>
<span class="sd">(frequency of classes in ytest).</span>

<span class="sd">By default the output result is sorted based on Recall_1.</span>
<span class="sd">Usually Recall_1 is the class related to Frauds == 1</span>
<span class="sd">and and we are interested in the metric</span>
<span class="sd">&quot;Recall&quot; of the Fraud for Fraud Detection Modellings.</span>

<span class="sd">In case of spam email detection, we are interested in &quot;Precision&quot;</span>
<span class="sd">of the Spam detection and we can choose style_col as &#39;Precision_1&#39;.</span>

<span class="sd">In the classification cases such as cat and dogs clasification,</span>
<span class="sd">we may be equally interested in both precision and recall and</span>
<span class="sd">we can choose &#39;F1_Score_1&#39; as the style column.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">Examples</span>
<span class="o">------------</span>
<span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>

    <span class="n">df_clf_report</span> <span class="o">=</span> <span class="n">get_binary_classification_report1</span><span class="p">(</span><span class="s2">&quot;Logistic Regression&quot;</span><span class="p">,</span>
    <span class="n">ytest</span><span class="p">,</span>
    <span class="n">ypreds_lr</span><span class="p">,</span>
    <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">style_col</span><span class="o">=</span><span class="s1">&#39;recall_1&#39;</span><span class="p">,</span>
    <span class="n">df_clf_report</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.get_binary_classification_scalar_metrics">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">get_binary_classification_scalar_metrics</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">model</em>, <em class="sig-param">Xtest</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em>, <em class="sig-param">desc=''</em>, <em class="sig-param">df_eval=None</em>, <em class="sig-param">style_col='Recall'</em>, <em class="sig-param">show=True</em>, <em class="sig-param">round_=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#get_binary_classification_scalar_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.get_binary_classification_scalar_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get some scalar metrics for binary classification.</p>
<blockquote>
<div><dl class="simple">
<dt>model_name: string</dt><dd><p>Name of the model</p>
</dd>
<dt>model: object</dt><dd><p>sklearn model instance</p>
</dd>
<dt>Xtest: np.array</dt><dd><p>Test predictor variable</p>
</dd>
<dt>ytest: np.array</dt><dd><p>Test response variable</p>
</dd>
<dt>ypred: np.array</dt><dd><p>Test response predictions.</p>
</dd>
<dt>df_eval: pandas.DataFrame</dt><dd><p>Pandas dataframe for model evaluation.</p>
</dd>
<dt>style_col: string</dt><dd><p>Name of the evaluation output column to style.</p>
</dd>
<dt>show: bool</dt><dd><p>Whether to show or not the styled dataframe</p>
</dd>
<dt>round: int</dt><dd><p>Rounding number to round off the displayed data.</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">This is a helper function intended to be used in Jupyter notebooks.</span>

<span class="sd">This function displays various scalar binary classification metrics.</span>
<span class="sd">AA===================================================================</span>

<span class="sd">Accuracy = (TP+TN) / (TP+TN+FP+FN)   Overall accuracy of the model.</span>
<span class="sd">Precision = TP / (TP+FP)  Precision has all P&#39;s.</span>
<span class="sd">Useful for email spam detection.</span>
<span class="sd">Recall = TP / (TP+FN) FP is replaced by FN.</span>
<span class="sd">Useful for fraud detection, patient detection.</span>
<span class="sd">F1 = 2 / (1/precision + 1/recall) Harmonic mean of precision and recall.</span>
<span class="sd">Useful when both precision and recall are important.</span>
<span class="sd">AA===================================================================</span>

<span class="sd">Matthews Correlation Coefficient</span>
<span class="sd">https://www.wikiwand.com/en/Matthews_correlation_coefficient</span>
<span class="sd">NOTE: F1-score depends on which class is defined as the positive class.</span>
<span class="sd">F1-score will be high if majority of the classes defined are positive</span>
<span class="sd">or vice versa.</span>

<span class="sd">Matthews Correlation Coefficient is independent of classes frequencies.</span>
<span class="sd">It is given by:</span>

<span class="sd">MCC =     (TP * TN - FP*FN)</span>
<span class="sd">    ------------------------------------------------</span>
<span class="sd">    sqrt( (TP+FP)   (TP+FN)   (TN+FP)   (TN+FN)  )</span>
<span class="sd">AA===================================================================</span>

<span class="sd">Cohen&#39;s Kappa</span>
<span class="sd">https://psychology.wikia.org/wiki/Cohen%27s_kappa</span>
<span class="sd">Cohen&#39;s kappa measures the agreement between two raters who each classify</span>
<span class="sd">N items into C mutually exclusive categories.</span>

<span class="sd">Cohen&#39;s Kappa is given by:</span>
<span class="sd">k = Pr(a) - Pr(e)</span>
<span class="sd">    --------------------</span>
<span class="sd">    1 - Pr(e)</span>

<span class="sd">where Pr(a) is the relative observed agreement among raters,</span>
<span class="sd">and Pr(e) is the hypothetical probability of chance agreement,</span>
<span class="sd">using the observed data to calculate the probabilities</span>
<span class="sd">of each observer randomly</span>
<span class="sd">saying each category.</span>
<span class="sd">If the raters are in complete agreement then κ = 1.</span>
<span class="sd">If there is no agreement among the raters</span>
<span class="sd">(other than what would be expected by chance)</span>
<span class="sd">then κ ≤ 0.</span>
<span class="sd">AA===================================================================</span>


<span class="sd">By default the output result is sorted based on Recall.</span>
<span class="sd">Usually Recall is the metric we are inteerested such as</span>
<span class="sd">in case of classification Fraud Detection Modellings.</span>

<span class="sd">In case of spam email detection, we are interested</span>
<span class="sd">in &quot;Precision&quot; of the Spam detection and</span>
<span class="sd">we can choose style_col as &#39;Precision&#39;.</span>

<span class="sd">In the classification cases such as cat and dogs clasification,</span>
<span class="sd">we may be equally interested in both precision and recall and</span>
<span class="sd">we can choose &#39;F1&#39; as the style column.</span>

<span class="sd">Example:</span>
<span class="sd">------------</span>
<span class="sd">df_eval = get_binary_classification_scalar_metrics1(</span>
<span class="sd">    model_name_lr,</span>
<span class="sd">    clf_lr,</span>
<span class="sd">    Xtest,ytest,</span>
<span class="sd">    ypreds_lr,</span>
<span class="sd">    desc=&quot;&quot;, df_eval=None) # or, df_eval = df_eval</span>

<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.get_binary_classification_scalar_metrics2">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">get_binary_classification_scalar_metrics2</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em>, <em class="sig-param">desc=''</em>, <em class="sig-param">df_eval=None</em>, <em class="sig-param">style_col='F1'</em>, <em class="sig-param">show=True</em>, <em class="sig-param">round_=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#get_binary_classification_scalar_metrics2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.get_binary_classification_scalar_metrics2" title="Permalink to this definition">¶</a></dt>
<dd><p>Get some scalar metrics for binary classification.</p>
<blockquote>
<div><dl class="simple">
<dt>model_name: string</dt><dd><p>Name of the model</p>
</dd>
<dt>ytest: np.array</dt><dd><p>Test response variable</p>
</dd>
<dt>ypreds: np.array</dt><dd><p>Test response predictions.</p>
</dd>
<dt>desc: string</dt><dd><p>Description of the model. (string sentence)</p>
</dd>
<dt>df_eval: pandas.DataFrame</dt><dd><p>Pandas dataframe for model evaluation.</p>
</dd>
<dt>style_col: string</dt><dd><p>Name of the evaluation output column to style.</p>
</dd>
<dt>show: bool</dt><dd><p>Whether to show or not the styled dataframe</p>
</dd>
<dt>round: int</dt><dd><p>Rounding number to round off the displayed data.</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">This is a helper function intended to be used in Jupyter notebooks.</span>

<span class="sd">This function displays various scalar binary classification metrics.</span>

<span class="sd">AA===================================================================</span>

<span class="sd">Accuracy = (TP+TN) / (TP+TN+FP+FN)   Overall accuracy of the model.</span>
<span class="sd">Precision = TP / (TP+FP)  Precision has all P&#39;s.</span>
<span class="sd">Useful for email spam detection.</span>
<span class="sd">Recall = TP / (TP+FN) FP is replaced by FN.</span>
<span class="sd">Useful for fraud detection, patient detection.</span>
<span class="sd">F1 = 2 / (1/precision + 1/recall) Harmonic mean of precision and recall.</span>
<span class="sd">Useful when both precision and recall are important.</span>

<span class="sd">AA===================================================================</span>
<span class="sd">Matthews Correlation Coefficient</span>
<span class="sd">https://www.wikiwand.com/en/Matthews_correlation_coefficient</span>
<span class="sd">NOTE: F1-score depends on which class is defined as the positive class.</span>
<span class="sd">F1-score will be high if majority of the classes defined are positive</span>
<span class="sd">or vice versa.</span>

<span class="sd">Matthews Correlation Coefficient is independent of classes frequencies.</span>
<span class="sd">It is given by:</span>

<span class="sd">MCC =     (TP * TN - FP*FN)</span>
<span class="sd">    ------------------------------------------------</span>
<span class="sd">    sqrt( (TP+FP)   (TP+FN)   (TN+FP)   (TN+FN)  )</span>

<span class="sd">AA===================================================================</span>

<span class="sd">Cohen&#39;s Kappa</span>
<span class="sd">https://psychology.wikia.org/wiki/Cohen%27s_kappa</span>
<span class="sd">Cohen&#39;s kappa measures the agreement between two raters who each classify</span>
<span class="sd">N items into C mutually exclusive categories.</span>

<span class="sd">Cohen&#39;s Kappa is given by:</span>
<span class="sd">k = Pr(a) - Pr(e)</span>
<span class="sd">    --------------</span>
<span class="sd">        1 - Pr(e)</span>

<span class="sd">where Pr(a) is the relative observed agreement among raters,</span>
<span class="sd">and Pr(e) is the hypothetical probability of chance agreement,</span>
<span class="sd">using the observed data to calculate the probabilities</span>
<span class="sd">of each observer randomly</span>
<span class="sd">saying each category.</span>
<span class="sd">If the raters are in complete agreement then κ = 1.</span>
<span class="sd">If there is no agreement among the raters</span>
<span class="sd">(other than what would be expected by chance)</span>
<span class="sd">then κ ≤ 0.</span>

<span class="sd">AA===================================================================</span>

<span class="sd">By default the output result is sorted based on F1.</span>
<span class="sd">Usually Recall is the metric we are inteerested such as</span>
<span class="sd">in case of classification Fraud Detection Modellings.</span>

<span class="sd">In case of spam email detection, we are interested</span>
<span class="sd">in &quot;Precision&quot; of the Spam detection and</span>
<span class="sd">we can choose style_col as &#39;Precision&#39;.</span>

<span class="sd">In the classification cases such as cat and dogs clasification,</span>
<span class="sd">we may be equally interested in both precision and recall and</span>
<span class="sd">we can choose &#39;F1&#39; as the style column.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">Example</span>
<span class="o">------------</span>
<span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>

    <span class="n">df_eval</span> <span class="o">=</span> <span class="n">get_binary_classification_scalar_metrics2</span><span class="p">(</span>
                <span class="s1">&#39;Statsmodels Logistic Regression&#39;</span><span class="p">,</span>
                <span class="n">y</span><span class="p">,</span><span class="n">ypreds</span><span class="p">,</span><span class="n">desc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">df_eval</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">style_col</span><span class="o">=</span><span class="s2">&quot;F1&quot;</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.get_false_negative_frauds">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">get_false_negative_frauds</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em>, <em class="sig-param">desc=''</em>, <em class="sig-param">df_false_negatives=None</em>, <em class="sig-param">show=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#get_false_negative_frauds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.get_false_negative_frauds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get False Negative Frauds in a binary classification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>string</em>) – Name of the model.</p></li>
<li><p><strong>ytest</strong> (<em>np.array</em>) – Test reponse variable.</p></li>
<li><p><strong>ypreds</strong> (<em>np.array</em>) – Test response variable predictions.</p></li>
<li><p><strong>desc</strong> (<em>string</em>) – A sentence describing the model.</p></li>
<li><p><strong>df_false_negatives</strong> (<em>pd.DataFrame</em>) – Pandas dataframe of False Negatives.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether to show or styled the dataframe or not.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">This is a helper function intended to be used in Jupyter notebooks.</span>

<span class="sd">This function displays a pandas dataframe having counts of total</span>
<span class="sd">frauds and false negative counts of detecting the frauds.</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_false_negatives</span> <span class="o">=</span> <span class="n">get_false_negative_frauds</span><span class="p">(</span><span class="s1">&#39;Logistic Regression&#39;</span><span class="p">,</span>
<span class="n">ytest</span><span class="p">,</span><span class="n">ypreds_best_lr</span><span class="p">,</span>
<span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Undersample, grid search&quot;</span><span class="p">,</span>
<span class="n">df_false_negatives</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
<span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.plot_confusion_matrix_plotly">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">plot_confusion_matrix_plotly</code><span class="sig-paren">(</span><em class="sig-param">ytest, ypreds, labels=['No_Fraud', 'Fraud'], precision=4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#plot_confusion_matrix_plotly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.plot_confusion_matrix_plotly" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot confusion using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ytest</strong> (<em>np.array</em>) – Test response variable.</p></li>
<li><p><strong>ypreds</strong> (<em>np.array</em>) – Test response variable predictions.</p></li>
<li><p><strong>labels</strong> (<em>list</em>) – A list containing labels of binary classification labels.
For example <cite>[‘Not-Fraud’, ‘Fraud’]</cite>.</p></li>
<li><p><strong>precision</strong> (<em>int</em>) – Integer to represent the precision.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.plot_roc_skf">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">plot_roc_skf</code><span class="sig-paren">(</span><em class="sig-param">clf</em>, <em class="sig-param">X</em>, <em class="sig-param">y</em>, <em class="sig-param">skf=None</em>, <em class="sig-param">random_state=None</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#plot_roc_skf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.plot_roc_skf" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the ROC Curve for the whole data X,y using stratified k-fold.</p>
<blockquote>
<div><dl class="simple">
<dt>clf: object</dt><dd><p>Classfier object from sklearn.</p>
</dd>
<dt>X: np.array</dt><dd><p>Predictor variable data.</p>
</dd>
<dt>y: np.array</dt><dd><p>Response variable.</p>
</dd>
<dt>skf: int</dt><dd><p>Stratified K-folding.</p>
</dd>
<dt>random_state: int</dt><dd><p>Random seed.</p>
</dd>
<dt>ofile: string</dt><dd><p>Name of output image file.</p>
</dd>
</dl>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">For k-fold, we do not need Xtrain and Xtest, we get them from X and y.</span>

<span class="sd">This plot shows ROC curve for different folds of the k-fold.</span>

<span class="sd">Ref: https://scikit-learn.org/stable/auto_examples/model_selection/</span>
<span class="sd">    plot_roc_crossval.html#sphx-glr-auto-examples</span>
<span class="sd">    -model-selection-plot-roc-crossval-py</span>

<span class="sd">NOTE:</span>
<span class="sd">ROC curves typically feature true positive rate on the Y axis,</span>
<span class="sd">and false positive rate on the X axis.</span>

<span class="sd">This means that the top left corner of the plot is the</span>
<span class="sd">“ideal” point - a false positive rate of zero,</span>
<span class="sd">and a true positive rate of one.</span>

<span class="sd">This is not very realistic, but it does mean that</span>
<span class="sd">a larger area under the curve (AUC) is usually better.</span>

<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_eval.print_confusion_matrix_frauds">
<code class="sig-prename descclassname">bhishan.ml_model_eval.</code><code class="sig-name descname">print_confusion_matrix_frauds</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_eval.html#print_confusion_matrix_frauds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_eval.print_confusion_matrix_frauds" title="Permalink to this definition">¶</a></dt>
<dd><p>Print confusion matrix for binary classification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>string</em>) – Name of the model.</p></li>
<li><p><strong>ytest</strong> (<em>np.array</em>) – Test reponse variable.</p></li>
<li><p><strong>ypreds</strong> (<em>np.array</em>) – Test response variable predictions.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">print_confusion_matrix</span><span class="p">(</span><span class="s1">&#39;Logistic Regression&#39;</span><span class="p">,</span> <span class="n">ytest</span><span class="p">,</span><span class="n">ypreds_lr</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ml_model_processing">
<span id="bhishan-ml-model-processing"></span><h2>bhishan.ml_model_processing<a class="headerlink" href="#module-bhishan.ml_model_processing" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ml_model_processing.add_interactions">
<code class="sig-prename descclassname">bhishan.ml_model_processing.</code><code class="sig-name descname">add_interactions</code><span class="sig-paren">(</span><em class="sig-param">df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_processing.html#add_interactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_processing.add_interactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Add two way interaction feature terms for all columns of pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Data to which we want to add the features.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">add_interactions</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This gives a lot of features which might cause the model to overfit. We can select k
best features using sklearn after doing this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sklearn.feature_selection</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">feature_selection</span><span class="o">.</span><span class="n">SelectKBest</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">selected_features</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_Xtrain</span><span class="p">,</span>  <span class="n">df_ytrain</span><span class="p">)</span>
<span class="n">indices_selected</span> <span class="o">=</span> <span class="n">selected_features</span><span class="o">.</span><span class="n">get_support</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">colnames_selected</span> <span class="o">=</span> <span class="p">[</span><span class="n">df_Xtrain</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices_selected</span><span class="p">]</span>

<span class="n">df_Xtrain_selected</span> <span class="o">=</span> <span class="n">df_Xtrain</span><span class="p">[</span><span class="n">colnames_selected</span><span class="p">]</span>
<span class="n">df_</span> <span class="n">Xtest_selected</span> <span class="o">=</span> <span class="n">df_Xtest</span><span class="p">[</span><span class="n">colnames_selected</span><span class="p">]</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_processing.find_outliers_kde">
<code class="sig-prename descclassname">bhishan.ml_model_processing.</code><code class="sig-name descname">find_outliers_kde</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_processing.html#find_outliers_kde"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_processing.find_outliers_kde" title="Permalink to this definition">¶</a></dt>
<dd><p>Find outliers using KDEUnivariate method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>np.array</em>) – data whose outliers are to be found.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method uses nonparametric way to estimate outliers.
It captures the outliers even in cases of bimodal distributions.</p>
<p>Ref: <a class="reference external" href="http://www.statsmodels.org/devel/generated/statsmodels.nonparametric.kde.KDEUnivariate.html">http://www.statsmodels.org/devel/generated/statsmodels.nonparametric.kde.KDEUnivariate.html</a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kde_indices</span><span class="p">,</span> <span class="n">kde_values</span> <span class="o">=</span> <span class="n">find_outliers_kde</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">kde_values</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_processing.find_outliers_tukey">
<code class="sig-prename descclassname">bhishan.ml_model_processing.</code><code class="sig-name descname">find_outliers_tukey</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">thresh=1.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_processing.html#find_outliers_tukey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_processing.find_outliers_tukey" title="Permalink to this definition">¶</a></dt>
<dd><p>Get outliers bases on Tukeys Inter Quartile Range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>np.array</em>) – Data whose outliers is to be found.</p></li>
<li><p><strong>thresh</strong> (<em>float</em>) – Thereshold.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tukey_indices</span><span class="p">,</span> <span class="n">tukey_values</span> <span class="o">=</span> <span class="n">find_outliers_tukey</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">tukey_values</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_model_processing.select_kbest_features">
<code class="sig-prename descclassname">bhishan.ml_model_processing.</code><code class="sig-name descname">select_kbest_features</code><span class="sig-paren">(</span><em class="sig-param">df_Xtrain</em>, <em class="sig-param">df_ytrain</em>, <em class="sig-param">df_Xtest</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_model_processing.html#select_kbest_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_model_processing.select_kbest_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Select Kbest features using scikit learn SelectKBest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_Xtrain</strong> (<em>pandas.DataFrame</em>) – Training predictor variables.</p></li>
<li><p><strong>df_ytest</strong> (<em>pandas.DataFrame</em>) – Training response variable.</p></li>
<li><p><strong>df_Xtest</strong> (<em>pandas.DataFrame</em>) – Test predictor variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>df_Xtrain_selected</strong> (<em>pandas.DataFrame</em>) – Training data with selected features.</p></li>
<li><p><strong>df_Xtest_selected</strong> (<em>pandas.DataFrame</em>) – Test data with selected features.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.ml_statsmodels">
<span id="bhishan-ml-statsmodels"></span><h2>bhishan.ml_statsmodels<a class="headerlink" href="#module-bhishan.ml_statsmodels" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.ml_statsmodels.lm_plot">
<code class="sig-prename descclassname">bhishan.ml_statsmodels.</code><code class="sig-name descname">lm_plot</code><span class="sig-paren">(</span><em class="sig-param">df_X1train</em>, <em class="sig-param">df_ytrain</em>, <em class="sig-param">df_ypreds_train</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_statsmodels.html#lm_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_statsmodels.lm_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides R style residual plots based on results from lm_stats</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_X1train</strong> (<em>pandas.DataFrame</em>) – Pandas dataframe with bias column added.</p></li>
<li><p><strong>df_ytrain</strong> (<em>pandas.Series</em>) – Pandas series with response variable.</p></li>
<li><p><strong>df_ypreds_train</strong> (<em>pandas.Series</em>) – Pandas series of reponse variable predictions.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Boolean to show whether to print description of stats or not.</p></li>
<li><p><strong>ofile</strong> (<em>string</em>) – Name of output file for plot.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_statsmodels.lm_residual_corr_plot">
<code class="sig-prename descclassname">bhishan.ml_statsmodels.</code><code class="sig-name descname">lm_residual_corr_plot</code><span class="sig-paren">(</span><em class="sig-param">df_X1train</em>, <em class="sig-param">df_ytrain</em>, <em class="sig-param">df_ypreds_train</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_statsmodels.html#lm_residual_corr_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_statsmodels.lm_residual_corr_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear models residual correlation plots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_X1train</strong> (<em>pandas.DataFrame</em>) – Pandas dataframe with bias column added.</p></li>
<li><p><strong>df_ytrain</strong> (<em>pandas.Series</em>) – Pandas series with response variable.</p></li>
<li><p><strong>df_ypreds_train</strong> (<em>pandas.Series</em>) – Pandas series of reponse variable predictions.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Boolean to show whether to print description of stats or not.</p></li>
<li><p><strong>ofile</strong> (<em>string</em>) – Name of output file for plot.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_statsmodels.lm_stats">
<code class="sig-prename descclassname">bhishan.ml_statsmodels.</code><code class="sig-name descname">lm_stats</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">y</em>, <em class="sig-param">y_pred</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_statsmodels.html#lm_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_statsmodels.lm_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Get leverage and studentised residuals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – Predictor variable.</p></li>
<li><p><strong>y</strong> (<em>np.array</em>) – Response variable.</p></li>
<li><p><strong>y_pred</strong> (<em>np.array</em>) – predictions of response variable.</p></li>
<li><p><strong>https</strong> (<em>//en.wikipedia.org/wiki/Studentized_residual#How_to_studentize</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_statsmodels.print_statsmodels_summary">
<code class="sig-prename descclassname">bhishan.ml_statsmodels.</code><code class="sig-name descname">print_statsmodels_summary</code><span class="sig-paren">(</span><em class="sig-param">summary</em>, <em class="sig-param">verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_statsmodels.html#print_statsmodels_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_statsmodels.print_statsmodels_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print statsmodels fitted model summary with some color hightlights.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>summary</strong> (<em>object</em>) – Statsmodel fitted model summary.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="kn">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">as</span> <span class="nn">smf</span>
<span class="n">formula</span> <span class="o">=</span> <span class="s1">&#39;price ~ sqft_living&#39;</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="n">formula</span><span class="o">=</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">Xtrain</span><span class="p">,</span><span class="n">ytrain</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">model_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">model_fit</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<p>Colors picked from: <a class="reference external" href="https://www.w3schools.com/colors/colors_picker.asp">https://www.w3schools.com/colors/colors_picker.asp</a></p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">From: &#39;&lt;th&gt;  Adj. R-squared:    &lt;/th&gt;&#39;</span>
<span class="sd">To  : &#39;&lt;th style=&quot;background-color:{};&quot;&gt; Adj. R-squared: &lt;/th&gt;&#39;</span>
<span class="sd">        &#39;&lt;th                              Adj. R-squared:    &lt;/th&gt;&#39;,</span>
<span class="sd">Fill the color background inside &lt;th&gt; tag.</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.ml_statsmodels.regression_residual_plots">
<code class="sig-prename descclassname">bhishan.ml_statsmodels.</code><code class="sig-name descname">regression_residual_plots</code><span class="sig-paren">(</span><em class="sig-param">model_fit, dependent_var, data, size=[10, 10], cook_xlim=None, cook_ylim=None, annotate_outliers=True, verbose=True, title=None, loc='upper right', ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/ml_statsmodels.html#regression_residual_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.ml_statsmodels.regression_residual_plots" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_fit</strong> (<em>object</em>) – Fitted model from statsmodels.</p></li>
<li><p><strong>dependent_var</strong> (<em>string</em>) – Feature name for dependent variable.</p></li>
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – </p></li>
<li><p><strong>size</strong> (<em>list</em>) – default is [10,10]. matplotlib figsize = [10,10]</p></li>
<li><p><strong>code-block:</strong> (<em>.</em>) – python: import matplotlib.pyplot as plt
import statsmodels.api as sm
model_fit = sm.OLS(endog= DEPENDENT VARIABLE, exog= INDEPENDENT VARIABLE).fit()</p></li>
<li><p><strong>NOTE</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>only run it on simple</strong><strong>, </strong><strong>non-robust</strong><strong>, </strong><strong>ordinary least squares models</strong><strong>,</strong> (<em>Ive</em>) – </p></li>
<li><p><strong>these metrics are standard for linear models.</strong> (<em>but</em>) – </p></li>
<li><p><strong>Ref</strong> (<a class="reference external" href="https://www.kaggle.com/nicapotato/in-depth-simple-linear-regression">https://www.kaggle.com/nicapotato/in-depth-simple-linear-regression</a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_bokeh">
<span id="bhishan-plot-bokeh"></span><h2>bhishan.plot_bokeh<a class="headerlink" href="#module-bhishan.plot_bokeh" title="Permalink to this headline">¶</a></h2>
<p>To stop auto opening of new tab with html in jupyte notebook, we can use
following two lines in each cell of jupyter notebook:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bokeh</span>
<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">reset_output</span><span class="p">()</span>
<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">output_notebook</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="bhishan.plot_bokeh.countplot_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">countplot_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cat</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">height=300</em>, <em class="sig-param">width=400</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#countplot_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.countplot_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Count plot of categorical feature using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cat</strong> (<em>str</em>) – categorical column name.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>If the figure is not displayed use following:
.. code-block:: python</p>
<blockquote>
<div><p>import bokeh
bokeh.io.reset_output()
bokeh.io.output_notebook()</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.histogram_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">histogram_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em>, <em class="sig-param">n_bins</em>, <em class="sig-param">bin_range=None</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">height=300</em>, <em class="sig-param">width=400</em>, <em class="sig-param">color='violet'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#histogram_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.histogram_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot interactive histogram using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Name of the column.</p></li>
<li><p><strong>n_bins</strong> (<em>int</em>) – Number of bins in the histogram.</p></li>
<li><p><strong>bin_range</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>)</em>) – Lower and uppr range of bins in the histogram.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of the plot.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of the plot.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Color of the histogram.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.map_plot_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">map_plot_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_lat</em>, <em class="sig-param">col_lon</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#map_plot_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.map_plot_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Mercaptor plot from latitude and longitude using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_lat</strong> (<em>str</em>) – Name of latitude column.</p></li>
<li><p><strong>col_lon</strong> (<em>str</em>) – Name of longitude column.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of output file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.merc">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">merc</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_lat</em>, <em class="sig-param">col_lon</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#merc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.merc" title="Permalink to this definition">¶</a></dt>
<dd><p>Mercaptor plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_lat</strong> (<em>str</em>) – Name of latitude column.</p></li>
<li><p><strong>col_lon</strong> (<em>str</em>) – Name of longitude column.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.scatterplot_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">scatterplot_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">xaxis_type='linear'</em>, <em class="sig-param">yaxis_type='linear'</em>, <em class="sig-param">xrange=None</em>, <em class="sig-param">yrange=None</em>, <em class="sig-param">height=300</em>, <em class="sig-param">width=400</em>, <em class="sig-param">color='#000000'</em>, <em class="sig-param">size=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#scatterplot_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.scatterplot_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Scatterplot using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input dataframe.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – x column name.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – y column name.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of output html.</p></li>
<li><p><strong>xaxis_type</strong> (<em>str</em>) – Type of xaxis. e.g. linear, log.</p></li>
<li><p><strong>yaxis_type</strong> (<em>str</em>) – Type of yaxis. Eg. linear, log.</p></li>
<li><p><strong>xrange</strong> (<em>list</em>) – X axis limit.</p></li>
<li><p><strong>yrange</strong> (<em>list</em>) – Y axis limit.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of the image.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of the image.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Name of color. e.g hexstrings.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – Size of the scatter dots.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.stacked_barplot_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">stacked_barplot_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycols</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#stacked_barplot_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.stacked_barplot_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Stacked barplot using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycols</strong> (<em>list</em>) – List with y column names.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of output file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;fruits&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Apples&#39;</span><span class="p">,</span> <span class="s1">&#39;Pears&#39;</span><span class="p">,</span> <span class="s1">&#39;Nectarines&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Plums&#39;</span><span class="p">,</span> <span class="s1">&#39;Grapes&#39;</span><span class="p">,</span> <span class="s1">&#39;Strawberries&#39;</span><span class="p">],</span>
        <span class="s1">&#39;2015&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="s1">&#39;2016&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
        <span class="s1">&#39;2017&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="n">ycols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2015&#39;</span><span class="p">,</span><span class="s1">&#39;2016&#39;</span><span class="p">]</span>
<span class="n">xcol</span> <span class="o">=</span> <span class="s1">&#39;fruits&#39;</span>
<span class="n">stacked_barplot_bokeh</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="s1">&#39;fruits&#39;</span><span class="p">,[</span><span class="s1">&#39;2015&#39;</span><span class="p">,</span><span class="s1">&#39;2016&#39;</span><span class="p">])</span>

<span class="n">df1</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;yr_sales&#39;</span><span class="p">,</span><span class="s1">&#39;view&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;price&#39;</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="p">)</span>

<span class="n">stacked_barplot_bokeh</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span><span class="n">df1</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_bokeh.stacked_countplot_bokeh">
<code class="sig-prename descclassname">bhishan.plot_bokeh.</code><code class="sig-name descname">stacked_countplot_bokeh</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">target</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">agg_type='count'</em>, <em class="sig-param">height=300</em>, <em class="sig-param">width=400</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_bokeh.html#stacked_countplot_bokeh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_bokeh.stacked_countplot_bokeh" title="Permalink to this definition">¶</a></dt>
<dd><p>Stacked countplot using bokeh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – Name of y column.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of the target column.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>agg_type</strong> (<em>str</em>) – Type of aggregation. E.g. ‘count’, ‘sum’</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of the plot.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of the plot.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_colors">
<span id="bhishan-plot-colors"></span><h2>bhishan.plot_colors<a class="headerlink" href="#module-bhishan.plot_colors" title="Permalink to this headline">¶</a></h2>
<p>Color utiliites.</p>
<dl class="function">
<dt id="bhishan.plot_colors.get_distinct_colors">
<code class="sig-prename descclassname">bhishan.plot_colors.</code><code class="sig-name descname">get_distinct_colors</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_colors.html#get_distinct_colors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_colors.get_distinct_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get distinct colors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em><em> or </em><em>int</em>) – String or integer to get the key. Look the example below for valid names.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">key is one of the integers: 10 20 30 40 50 75 100</span>
<span class="sd">key is one of the following strings:</span>

<span class="sd">&#39;reds&#39; &#39;greens&#39; &#39;blues&#39; &#39;grays&#39;&#39;yellows&#39;</span>
<span class="sd">&#39;colors10_names&#39; &#39;colors10_hex&#39;</span>
<span class="sd">&#39;colors20_names&#39; &#39;colors20_hex&#39;</span>
<span class="sd">&#39;colors30_names&#39; &#39;colors30_hex&#39;</span>
<span class="sd">&#39;colors40_names&#39; &#39;colors40_hex&#39;</span>
<span class="sd">&#39;colors50_names&#39; &#39;colors50_hex&#39;,</span>
<span class="sd">&#39;colors75_names&#39; &#39;colors75_hex&#39;</span>
<span class="sd">&#39;colors100_names&#39; &#39;colors100_hex&#39;</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_colors.hex_to_rgb">
<code class="sig-prename descclassname">bhishan.plot_colors.</code><code class="sig-name descname">hex_to_rgb</code><span class="sig-paren">(</span><em class="sig-param">h</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_colors.html#hex_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_colors.hex_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert hexadecimal color codes to rgb</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>h</strong> (<em>str</em>) – Hex string to convert to rgb.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;#D8BFD8&#39;</span>
<span class="n">rgb</span> <span class="o">=</span> <span class="s1">&#39;rgb(216, 191, 216)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_colors.rgb2hex">
<code class="sig-prename descclassname">bhishan.plot_colors.</code><code class="sig-name descname">rgb2hex</code><span class="sig-paren">(</span><em class="sig-param">color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_colors.html#rgb2hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_colors.rgb2hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list or tuple of  an RGB values to HEX string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>color</strong> (<em>list</em>) – the list or tuple of integers (e.g. (127, 127, 127))</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>str</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>the rgb string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_ds">
<span id="bhishan-plot-ds"></span><h2>bhishan.plot_ds<a class="headerlink" href="#module-bhishan.plot_ds" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.plot_ds.add_text_barplot">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">add_text_barplot</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">decimals=4</em>, <em class="sig-param">rot=30</em>, <em class="sig-param">percent=False</em>, <em class="sig-param">comma=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#add_text_barplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.add_text_barplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the text to bar plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>matplotlib Axis object</em>) – Matplotlib axis.</p></li>
<li><p><strong>decimals</strong> (<em>int</em>) – Number of decimal places to show in top of the bar.</p></li>
<li><p><strong>rot</strong> (<em>int</em>) – Rotation to rotate the label on top of the bar.</p></li>
<li><p><strong>percent</strong> (<em>bool</em>) – Whether or not show the percentage.</p></li>
<li><p><strong>comma</strong> (<em>bool</em>) – Whether or not format the number using comma.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.corrplot_with_pearsonr">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">corrplot_with_pearsonr</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#corrplot_with_pearsonr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.corrplot_with_pearsonr" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation plot with Pearson correlation coefficient.
Diagonals are distplots, right are scatterplots and left are kde.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of output image file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sqft_living&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_living15&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_above&#39;</span><span class="p">]</span>
<span class="n">corrplot_with_pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.multiple_jointplots_with_pearsonr">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">multiple_jointplots_with_pearsonr</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">target</em>, <em class="sig-param">ofile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#multiple_jointplots_with_pearsonr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.multiple_jointplots_with_pearsonr" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot multiple jointplots with pearsonr correlation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of target column.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cat</em>, <em class="sig-param">comma=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the categorical feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cat</strong> (<em>str</em>) – categorical feature to plot.</p></li>
<li><p><strong>comma</strong> (<em>bool</em>) – Whether or not to format the number with comma.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_cat_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_cat_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cat</em>, <em class="sig-param">binn</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">12)</em>, <em class="sig-param">ylim2=None</em>, <em class="sig-param">rot=30</em>, <em class="sig-param">comma=True</em>, <em class="sig-param">loc='lower left'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_cat_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_cat_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot 2*2 plot for categorical feature vs target-categorical feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cat</strong> (<em>str</em>) – categorical feature.</p></li>
<li><p><strong>binn</strong> (<em>str</em>) – Binary feature.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
<li><p><strong>ylim2</strong> (<em>int</em>) – Second plot y-limit upper range.</p></li>
<li><p><strong>rot</strong> (<em>int</em>) – Degree to rotate the text on barplot.</p></li>
<li><p><strong>comma</strong> (<em>bool</em>) – Whether or not to style the number with comma in text in barplots.</p></li>
<li><p><strong>loc</strong> (<em>str</em>) – matplotlib plot loc (location) variable. 0 1 2 3 or ‘upper right’ etc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span>
<span class="n">target_cat</span> <span class="o">=</span> <span class="s1">&#39;conversion&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_cat_num">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_cat_num</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cat</em>, <em class="sig-param">num</em>, <em class="sig-param">comma=False</em>, <em class="sig-param">decimals=2</em>, <em class="sig-param">rot=30</em>, <em class="sig-param">add_text=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_cat_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_cat_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the categorical feature against numerical feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cat</strong> (<em>str</em>) – Categorical feature.</p></li>
<li><p><strong>num</strong> (<em>str</em>) – Numerical feature.</p></li>
<li><p><strong>comma</strong> (<em>bool</em>) – Wheter or not to style bar plot with comma.</p></li>
<li><p><strong>decimals</strong> (<em>int</em>) – Number of decimal places to use in bar plot text.</p></li>
<li><p><strong>rot</strong> (<em>int</em>) – Degree of rotation for text in barplot.</p></li>
<li><p><strong>add_text</strong> (<em>bool</em>) – Whether or not to add the text to plots.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categorical</span> <span class="n">feature</span><span class="p">:</span> <span class="n">age</span>
<span class="n">target</span> <span class="n">numerical</span> <span class="n">column</span><span class="p">:</span> <span class="n">salary</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_corrplot_with_pearsonr">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_corrplot_with_pearsonr</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">ofile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_corrplot_with_pearsonr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_corrplot_with_pearsonr" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation plot with Pearson correlation coefficient.
Diagonals are distplots, right are scatterplots and left are kde.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sqft_living&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_living15&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_above&#39;</span><span class="p">]</span>
<span class="n">plot_corrplot_with_pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">cols</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_count">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_count</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em>, <em class="sig-param">percent=True</em>, <em class="sig-param">bottom=0</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">8)</em>, <em class="sig-param">fontsizex=18</em>, <em class="sig-param">fontsizey=18</em>, <em class="sig-param">horizontal=False</em>, <em class="sig-param">number=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_count" title="Permalink to this definition">¶</a></dt>
<dd><p>count plot of given column with optional percent display.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Name of column.</p></li>
<li><p><strong>percent</strong> (<em>bool</em>) – Whether or not the percent to be shown.</p></li>
<li><p><strong>bottom</strong> (<em>float</em>) – Adjust the matplotlib figure bottom.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of output figure file.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
<li><p><strong>fontsizex</strong> (<em>int</em>) – Font size for xticks.</p></li>
<li><p><strong>fontsizey</strong> (<em>int</em>) – Font size for yticks.</p></li>
<li><p><strong>horizontal</strong> (<em>bool</em>) – Whether or not plot horizontal bar plot.</p></li>
<li><p><strong>number</strong> (<em>int</em>) – Whether or not to show to number on top of barplots.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_count_pct_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_count_pct_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cat</em>, <em class="sig-param">target_cat</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">8)</em>, <em class="sig-param">ylim2=None</em>, <em class="sig-param">odir='images'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_count_pct_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_count_pct_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot 2*2 plot for categorical feature vs target-cateogoical feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cat</strong> (<em>str</em>) – Categorical feature.</p></li>
<li><p><strong>target_cat</strong> (<em>str</em>) – Categorical target feature.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
<li><p><strong>ylim2</strong> (<em>int</em>) – Upper limit of yaxis.</p></li>
<li><p><strong>odir</strong> (<em>str</em>) – Name of output directory.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span>
<span class="n">target_cat</span> <span class="o">=</span> <span class="s1">&#39;conversion&#39;</span>
<span class="n">odir</span> <span class="o">=</span> <span class="s1">&#39;images&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_daily_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_daily_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_date</em>, <em class="sig-param">target_cat</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">8)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_daily_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_daily_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Daily total plot of binary target.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_date</strong> (<em>str</em>) – Datetime feature.</p></li>
<li><p><strong>target_cat</strong> (<em>str</em>) – Categorical target variable.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">col_date</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span> <span class="c1"># datetime format</span>
<span class="n">target_cat</span> <span class="o">=</span> <span class="s1">&#39;subscribed&#39;</span> <span class="c1"># True or False</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will plot daily sum for both True and False subscribed users.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_date_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_date_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_date</em>, <em class="sig-param">target_cat</em>, <em class="sig-param">figsize=(8</em>, <em class="sig-param">6)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_date_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_date_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Seasonal plot of datetime column vs target cat.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_date</strong> (<em>str</em>) – datetime feature.</p></li>
<li><p><strong>target_cat</strong> (<em>str</em>) – binary target feature</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>To see full images in jupyter notebook use this:
.. code-block:: python</p>
<blockquote>
<div><p>%%javascript
IPython.OutputArea.auto_scroll_threshold = 9999;</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_num">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_num</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot numerical column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Name of the numerical column.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_num_cat">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_num_cat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_num</em>, <em class="sig-param">target_cat</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">8)</em>, <em class="sig-param">bins=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_num_cat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_num_cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot of continuous variable vs binary-target.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_num</strong> (<em>str</em>) – Numerical feature which is to be plotted.</p></li>
<li><p><strong>target_cat</strong> (<em>str</em>) – Target categorical feature.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
<li><p><strong>bins</strong> (<em>int</em>) – Number of bins in the histogram.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">col_num</span> <span class="o">=</span> <span class="s1">&#39;age&#39;</span>
<span class="n">target_cat</span> <span class="o">=</span> <span class="s1">&#39;conversion&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.plot_num_cat2">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">plot_num_cat2</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col_num</em>, <em class="sig-param">target_cat</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">8)</em>, <em class="sig-param">bins=100</em>, <em class="sig-param">odir='images'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#plot_num_cat2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.plot_num_cat2" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot of continuous variable vs binary-target.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col_num</strong> (<em>str</em>) – Name of numeric column.</p></li>
<li><p><strong>target_cat</strong> (<em>str</em>) – Name of categorical column.</p></li>
<li><p><strong>figsize</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Figure size.</p></li>
<li><p><strong>bins</strong> (<em>int</em>) – Number of bins in the histogram.</p></li>
<li><p><strong>odir</strong> (<em>str</em>) – Name of output directory.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">col_num</span> <span class="o">=</span> <span class="s1">&#39;age&#39;</span>
<span class="n">target_cat</span> <span class="o">=</span> <span class="s1">&#39;conversion&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_ds.seaborn_boxplots_for_loop">
<code class="sig-prename descclassname">bhishan.plot_ds.</code><code class="sig-name descname">seaborn_boxplots_for_loop</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_ds.html#seaborn_boxplots_for_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_ds.seaborn_boxplots_for_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot boxplots in a loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns to plot boxplots.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of target column.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_model">
<span id="bhishan-plot-model"></span><h2>bhishan.plot_model<a class="headerlink" href="#module-bhishan.plot_model" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.plot_model.plot_simple_linear_regression">
<code class="sig-prename descclassname">bhishan.plot_model.</code><code class="sig-name descname">plot_simple_linear_regression</code><span class="sig-paren">(</span><em class="sig-param">X_test</em>, <em class="sig-param">y_test</em>, <em class="sig-param">model</em>, <em class="sig-param">xlabel</em>, <em class="sig-param">ylabel</em>, <em class="sig-param">figsize=(6</em>, <em class="sig-param">5)</em>, <em class="sig-param">data_color='salmon'</em>, <em class="sig-param">pred_color='seagreen'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_model.html#plot_simple_linear_regression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_model.plot_simple_linear_regression" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bhishan.plot_model_eval">
<span id="bhishan-plot-model-eval"></span><h2>bhishan.plot_model_eval<a class="headerlink" href="#module-bhishan.plot_model_eval" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.plot_model_eval.plotly_binary_clf_evaluation">
<code class="sig-prename descclassname">bhishan.plot_model_eval.</code><code class="sig-name descname">plotly_binary_clf_evaluation</code><span class="sig-paren">(</span><em class="sig-param">model_name</em>, <em class="sig-param">model</em>, <em class="sig-param">ytest</em>, <em class="sig-param">ypreds</em>, <em class="sig-param">y_score</em>, <em class="sig-param">df_train_balanced_features</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_model_eval.html#plotly_binary_clf_evaluation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_model_eval.plotly_binary_clf_evaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotly plots of model performance.</p>
<p>Ref: <a class="reference external" href="https://www.kaggle.com/vincentlugat/lightgbm-plotly">https://www.kaggle.com/vincentlugat/lightgbm-plotly</a></p>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_plotly">
<span id="bhishan-plot-plotly"></span><h2>bhishan.plot_plotly<a class="headerlink" href="#module-bhishan.plot_plotly" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bhishan.plot_plotly.get_distinct_colors">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">get_distinct_colors</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#get_distinct_colors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.get_distinct_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get n distint colors.
I have first created some unique colors using <a class="reference external" href="http://mokole.com/palette">http://mokole.com/palette</a>
and later used them to find the n unique colors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em><em> or </em><em>int</em>) – If key is integer, n distinct colors will be returned.
Else, if key is string, the available colors will be returned.
We can use key ‘all’ to get the name of all color keys.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.get_mapbox_access_token">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">get_mapbox_access_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#get_mapbox_access_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.get_mapbox_access_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.hex_to_rgb">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">hex_to_rgb</code><span class="sig-paren">(</span><em class="sig-param">h</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#hex_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.hex_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert hexadecimal color codes to rgb</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>h</strong> (<em>str</em>) – Hex string.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;#D8BFD8&#39;</span>
<span class="n">rgb</span> <span class="o">=</span> <span class="s1">&#39;rgb(216, 191, 216)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_boxplot">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_boxplot</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">ylim_lst=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_boxplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_boxplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Box plot using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns.</p></li>
<li><p><strong>ylim_lst</strong> (<em>list</em>) – List for yaxis limit.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Name of color for the boxplot.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_boxplot_allpoints_with_outliers">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_boxplot_allpoints_with_outliers</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em>, <em class="sig-param">color=None</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_boxplot_allpoints_with_outliers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_boxplot_allpoints_with_outliers" title="Permalink to this definition">¶</a></dt>
<dd><p>Box plot with all points and outliers using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Name of column.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Name of color for the boxplot.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_boxplot_categorical_column">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_boxplot_categorical_column</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_boxplot_categorical_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_boxplot_categorical_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Boxplot of categorical columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – Name of y column.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_bubbleplot">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_bubbleplot</code><span class="sig-paren">(</span><em class="sig-param">df1</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol1</em>, <em class="sig-param">ycol2=None</em>, <em class="sig-param">size_col=None</em>, <em class="sig-param">size_factor=5</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_bubbleplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_bubbleplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bubble plot of two y-axis columns according to size of size column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol1</strong> (<em>str</em>) – Name of y column1.</p></li>
<li><p><strong>ycol2</strong> (<em>str</em>) – Name of y column2.</p></li>
<li><p><strong>size_col</strong> (<em>str</em>) – Column for size of bubble plot.</p></li>
<li><p><strong>size_factor</strong> (<em>int</em>) – Integer to scale size of bubble plot.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">yr_built</span> <span class="o">==</span> <span class="mi">2014</span><span class="p">]</span>
<span class="n">plotly_bubbleplot</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="n">size_factor</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>data source: <a class="reference external" href="https://www.kaggle.com/harlfoxem/housesalesprediction">https://www.kaggle.com/harlfoxem/housesalesprediction</a></p>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_corr_heatmap">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_corr_heatmap</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">target</em>, <em class="sig-param">topN=10</em>, <em class="sig-param">method='pearson'</em>, <em class="sig-param">colorscale='Reds'</em>, <em class="sig-param">width=800</em>, <em class="sig-param">height=800</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_corr_heatmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_corr_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation heatmap plot using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Target variable name.</p></li>
<li><p><strong>topN</strong> (<em>int</em>) – Top n correlated variables to show in heatmap.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – Method of correlation. Default is ‘pearson’</p></li>
<li><p><strong>colorscale</strong> (<em>str</em>) – Color scale of heatmap. Default is ‘Reds’</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of heatmap.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of heatmap.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_countplot">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_countplot</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em>, <em class="sig-param">topN=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_countplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_countplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Value counts plot using plotly and pandas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>col</strong> (<em>str</em>) – The variable name.</p></li>
<li><p><strong>topN</strong> (<em>int</em>) – Top n correlated variables to show in heatmap.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Color of count plot.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_distplot">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_distplot</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cols</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_distplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_distplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Distribution plot using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>cols</strong> (<em>list</em>) – List of columns.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_histogram">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_histogram</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">col</em>, <em class="sig-param">nbins=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_histogram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Histogram plot of given column of pandas dataframe using plotly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Pandas dataframe</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Name of column</p></li>
<li><p><strong>nbins</strong> (<em>int</em>) – Number of bins to use in histogram.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – Step size of x-axis bins.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Color of the plot. Valid matplotlib color name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_mapbox">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_mapbox</code><span class="sig-paren">(</span><em class="sig-param">df1</em>, <em class="sig-param">lat_col</em>, <em class="sig-param">lon_col</em>, <em class="sig-param">color_col=None</em>, <em class="sig-param">text_col=None</em>, <em class="sig-param">title='My Map'</em>, <em class="sig-param">marker_size=4.5</em>, <em class="sig-param">zoom=9</em>, <em class="sig-param">width=800</em>, <em class="sig-param">height=800</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_mapbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_mapbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Map plot using mapbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df1</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>lat_col</strong> (<em>str</em>) – Name of latitude column.</p></li>
<li><p><strong>lon_col</strong> (<em>str</em>) – Name of longitude column.</p></li>
<li><p><strong>color_col</strong> (<em>str</em>) – Name of color column.</p></li>
<li><p><strong>text_col</strong> (<em>str</em>) – Name of text column.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – Title of the plot.</p></li>
<li><p><strong>marker_size</strong> (<em>int</em>) – Size of the marker.</p></li>
<li><p><strong>zoom</strong> (<em>int</em>) – Zoom the map.</p></li>
<li><p><strong>width</strong> (<em>int</em>) – Width of the map.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Height of the map.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_scattergl_plot">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_scattergl_plot</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">color=None</em>, <em class="sig-param">colorscale=None</em>, <em class="sig-param">logx=False</em>, <em class="sig-param">logy=False</em>, <em class="sig-param">bestfit=False</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_scattergl_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_scattergl_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Scatterplot for large data using webgl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – Name of y column.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – Name of color for scatterplot.</p></li>
<li><p><strong>color_scale</strong> (<em>str</em>) – Colorscale to choose.</p></li>
<li><p><strong>logx</strong> (<em>bool</em>) – Whether or not use log scale in x axis.</p></li>
<li><p><strong>logy</strong> (<em>bool</em>) – Whether or not use log scale in y axis.</p></li>
<li><p><strong>best_fit</strong> (<em>bool</em>) – Whether or not to show best fit line.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_scattergl_plot_colorcol">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_scattergl_plot_colorcol</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">colorcol</em>, <em class="sig-param">logx=False</em>, <em class="sig-param">logy=False</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_scattergl_plot_colorcol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_scattergl_plot_colorcol" title="Permalink to this definition">¶</a></dt>
<dd><p>Scatterplot using color column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – Name of y column.</p></li>
<li><p><strong>colorcol</strong> (<em>str</em>) – Name of column which have color names.</p></li>
<li><p><strong>logx</strong> (<em>bool</em>) – Whether or not use log scale in x axis.</p></li>
<li><p><strong>logy</strong> (<em>bool</em>) – Whether or not use log scale in y axis.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.plotly_scattergl_plot_subplots">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">plotly_scattergl_plot_subplots</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">xcol</em>, <em class="sig-param">ycol</em>, <em class="sig-param">subplot_cols</em>, <em class="sig-param">logx=False</em>, <em class="sig-param">logy=False</em>, <em class="sig-param">ofile=None</em>, <em class="sig-param">show=True</em>, <em class="sig-param">auto_open=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#plotly_scattergl_plot_subplots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.plotly_scattergl_plot_subplots" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot x vs y scatterplots for all the subplot columns one below another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input data.</p></li>
<li><p><strong>xcol</strong> (<em>str</em>) – Name of x column.</p></li>
<li><p><strong>ycol</strong> (<em>str</em>) – Name of y column.</p></li>
<li><p><strong>subplot_cols</strong> (<em>list</em>) – List of sub plot columns.</p></li>
<li><p><strong>logx</strong> (<em>bool</em>) – Whether or not use log scale in x axis.</p></li>
<li><p><strong>logy</strong> (<em>bool</em>) – Whether or not use log scale in y axis.</p></li>
<li><p><strong>ofile</strong> (<em>str</em>) – Name of the output file.</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Whether or not to show the rendered html in notebook.</p></li>
<li><p><strong>auto_open</strong> (<em>bool</em>) – Whether or not to automatically open the ouput html file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_plotly.rgb2hex">
<code class="sig-prename descclassname">bhishan.plot_plotly.</code><code class="sig-name descname">rgb2hex</code><span class="sig-paren">(</span><em class="sig-param">color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_plotly.html#rgb2hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_plotly.rgb2hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list or tuple of  an RGB values to HEX string.</p>
<p>Ref: <a class="reference external" href="https://stackoverflow.com/questions/3380726/converting-a-rgb-color-tuple-to-a-six-digit-code-in-python">https://stackoverflow.com/questions/3380726/converting-a-rgb-color-tuple-to-a-six-digit-code-in-python</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>color</strong> (<em>tuple</em><em>(</em><em>int</em><em>,</em><em>int</em><em>,</em><em>int</em><em>)</em>) – </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan.plot_utils">
<span id="bhishan-plot-utils"></span><h2>bhishan.plot_utils<a class="headerlink" href="#module-bhishan.plot_utils" title="Permalink to this headline">¶</a></h2>
<p>Plot utility functions.</p>
<dl class="function">
<dt id="bhishan.plot_utils.add_text_barplot">
<code class="sig-prename descclassname">bhishan.plot_utils.</code><code class="sig-name descname">add_text_barplot</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">decimals=4</em>, <em class="sig-param">rot=30</em>, <em class="sig-param">percent=False</em>, <em class="sig-param">comma=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_utils.html#add_text_barplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_utils.add_text_barplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the text to bar plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>matplotlib Axis object</em>) – Matplotlib axis.</p></li>
<li><p><strong>decimals</strong> (<em>int</em>) – Number of decimal places to show in top of the bar.</p></li>
<li><p><strong>rot</strong> (<em>int</em>) – Rotation to rotate the label on top of the bar.</p></li>
<li><p><strong>percent</strong> (<em>bool</em>) – Whether or not show the percentage.</p></li>
<li><p><strong>comma</strong> (<em>bool</em>) – Whether or not format the number using comma.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_utils.light_axis">
<code class="sig-prename descclassname">bhishan.plot_utils.</code><code class="sig-name descname">light_axis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_utils.html#light_axis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_utils.light_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Hide the top and right spines</p>
</dd></dl>

<dl class="function">
<dt id="bhishan.plot_utils.no_axis">
<code class="sig-prename descclassname">bhishan.plot_utils.</code><code class="sig-name descname">no_axis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/plot_utils.html#no_axis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.plot_utils.no_axis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bhishan.utils">
<span id="bhishan-utils"></span><h2>bhishan.utils<a class="headerlink" href="#module-bhishan.utils" title="Permalink to this headline">¶</a></h2>
<p>Python utils.</p>
<dl class="function">
<dt id="bhishan.utils.show_method_attributes">
<code class="sig-prename descclassname">bhishan.utils.</code><code class="sig-name descname">show_method_attributes</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">ncols=7</em>, <em class="sig-param">start=None</em>, <em class="sig-param">inside=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bhishan/utils.html#show_method_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bhishan.utils.show_method_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Show all the attributes of a given method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<em>object</em>) – Name of python object. eg. list, pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-bhishan">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-bhishan" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">bhishan package</a><ul>
<li><a class="reference internal" href="#subs">Subs</a></li>
<li><a class="reference internal" href="#module-bhishan.bp">bhishan.bp</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-bhishan.ds_ds">bhishan.ds_ds</a></li>
<li><a class="reference internal" href="#module-bhishan.ds_json">bhishan.ds_json</a></li>
<li><a class="reference internal" href="#module-bhishan.ds_speed">bhishan.ds_speed</a></li>
<li><a class="reference internal" href="#module-bhishan.ds_stats">bhishan.ds_stats</a></li>
<li><a class="reference internal" href="#module-bhishan.ml_model_eval">bhishan.ml_model_eval</a></li>
<li><a class="reference internal" href="#module-bhishan.ml_model_processing">bhishan.ml_model_processing</a></li>
<li><a class="reference internal" href="#module-bhishan.ml_statsmodels">bhishan.ml_statsmodels</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_bokeh">bhishan.plot_bokeh</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_colors">bhishan.plot_colors</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_ds">bhishan.plot_ds</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_model">bhishan.plot_model</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_model_eval">bhishan.plot_model_eval</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_plotly">bhishan.plot_plotly</a></li>
<li><a class="reference internal" href="#module-bhishan.plot_utils">bhishan.plot_utils</a></li>
<li><a class="reference internal" href="#module-bhishan.utils">bhishan.utils</a></li>
<li><a class="reference internal" href="#module-bhishan">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">bhishan</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/bhishan.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="bhishan"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Module: bhishan 1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Bhishan Poudel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>
  </body>
</html>