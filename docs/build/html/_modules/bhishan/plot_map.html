
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>bhishan.plot_map &#8212; Bhishan 1 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Bhishan 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for bhishan.plot_map</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">import</span> <span class="nn">plotly</span>
<span class="kn">import</span> <span class="nn">plotly.offline</span> <span class="k">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="k">as</span> <span class="nn">ff</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">make_subplots</span>
<span class="kn">import</span> <span class="nn">plotly.tools</span> <span class="k">as</span> <span class="nn">tls</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">iplot</span>


<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="c1"># Plotly Notes</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Colorscales: https://plot.ly/python/builtin-colorscales/</span>
<span class="sd">The default colorscale is ‘RdBu’.</span>

<span class="sd">[&#39;Reds&#39;,&#39;Greens&#39;,&#39;Blues&#39;,&#39;Greys&#39;,</span>
<span class="sd">&#39;Viridis&#39;,&#39;Earth&#39;,&#39;Rainbow&#39;,</span>
<span class="sd">&#39;Blackbody&#39;,&#39;Bluered&#39;,&#39;Electric&#39;,</span>
<span class="sd">&#39;Hot&#39;,&#39;Jet&#39;,</span>
<span class="sd">&#39;Picnic&#39;,&#39;Portland&#39;,</span>
<span class="sd">&#39;RdBu&#39;,&#39;YlGnBu&#39;,&#39;YlOrRd&#39;]</span>

<span class="sd">Custom colorscales:</span>
<span class="sd">colorscale = [[0,&#39;rgb(255, 255, 255)&#39;],[1,&#39;rgb(255, 0, 0)&#39;]]</span>


<span class="sd">New line in plotly:</span>
<span class="sd">df[&#39;text&#39;] = df[&#39;state&#39;] + &#39;&lt;br&gt;&#39; + df[&#39;city&#39;]</span>
<span class="sd">&quot;&quot;&quot;</span><span class="p">;</span>

<div class="viewcode-block" id="plotly_usa_map2"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_usa_map2">[docs]</a><span class="k">def</span> <span class="nf">plotly_usa_map2</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">col_state</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Plotly map plot for different states of USA.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_state: str</span>
<span class="sd">        Column name of states.</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Column name of values.</span>
<span class="sd">    title: str</span>
<span class="sd">        title of the plot.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>


<span class="sd">    Example 1</span>
<span class="sd">    -----------</span>
<span class="sd">    df = pd.DataFrame({&#39;state&#39;: [&#39;NY&#39;, &#39;OH&#39;,&#39;MI&#39;,&#39;CA&#39;,&#39;TX&#39;],</span>
<span class="sd">                    &#39;value&#39;: [100,200,300,400,500]})</span>
<span class="sd">    plotly_usa_map2(df,&#39;state&#39;,&#39;value&#39;)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># make sure df &lt;= 50</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">50</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                        <span class="n">locations</span><span class="o">=</span><span class="n">col_state</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="n">col_value</span><span class="p">,</span>
                        <span class="n">hover_name</span><span class="o">=</span><span class="n">col_state</span><span class="p">,</span>
                        <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;USA-states&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title_text</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
        <span class="n">geo_scope</span><span class="o">=</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="plotly_usa_map"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_usa_map">[docs]</a><span class="k">def</span> <span class="nf">plotly_usa_map</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">col_state</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span><span class="n">col_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Viridis&#39;</span><span class="p">,</span><span class="n">reversescale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotly map plot for different states of USA.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_state: str</span>
<span class="sd">        Name of State column. eg. OH</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Name of Value column. e.g. mean_salary</span>
<span class="sd">    col_text: str</span>
<span class="sd">        Name of Text column.</span>
<span class="sd">    colorscale: str</span>
<span class="sd">        Valid plotly colorscale name.</span>
<span class="sd">        The default colorscale is ‘RdBu’.</span>
<span class="sd">        https://plot.ly/python/builtin-colorscales/</span>
<span class="sd">        One of the following colorscales:</span>
<span class="sd">        [&#39;Reds&#39;,&#39;Greens&#39;,&#39;Blues&#39;,&#39;Greys&#39;,</span>
<span class="sd">        &#39;Viridis&#39;,&#39;Earth&#39;,&#39;Rainbow&#39;,</span>
<span class="sd">        &#39;Blackbody&#39;,&#39;Bluered&#39;,&#39;Electric&#39;,</span>
<span class="sd">        &#39;Hot&#39;,&#39;Jet&#39;,</span>
<span class="sd">        &#39;Picnic&#39;,&#39;Portland&#39;,</span>
<span class="sd">        &#39;RdBu&#39;,&#39;YlGnBu&#39;,&#39;YlOrRd&#39;]</span>
<span class="sd">    reversescale: bool</span>
<span class="sd">        Whether or not to reverse the colorscale.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>

<span class="sd">    Example 1</span>
<span class="sd">    -----------</span>
<span class="sd">    df = pd.DataFrame({&#39;state&#39;: [&#39;NY&#39;, &#39;OH&#39;,&#39;MI&#39;,&#39;CA&#39;,&#39;TX&#39;],</span>
<span class="sd">                    &#39;value&#39;: [100,200,300,400,500]})</span>
<span class="sd">    plotly_usa_map(df,&#39;state&#39;,&#39;value&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># make sure df &lt;= 50</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">50</span>

    <span class="c1"># title</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">col_value</span> <span class="o">+</span> <span class="s1">&#39; per state of USA&#39;</span>
    <span class="c1"># text</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">col_text</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_state</span><span class="p">]</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;choropleth&#39;</span><span class="p">,</span>
                <span class="n">colorscale</span> <span class="o">=</span> <span class="n">colorscale</span><span class="p">,</span>
                <span class="n">reversescale</span><span class="o">=</span><span class="n">reversescale</span><span class="p">,</span>
                <span class="n">locations</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col_state</span><span class="p">],</span>
                <span class="n">z</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col_value</span><span class="p">],</span>
                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span>
                <span class="p">)</span>
            <span class="p">]</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span>
                <span class="n">width</span>  <span class="o">=</span> <span class="n">width</span><span class="p">,</span>
                <span class="n">geo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span>
                            <span class="n">projection</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span> <span class="o">=</span><span class="s1">&#39;albers usa&#39;</span><span class="p">),</span>
                            <span class="n">showlakes</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">lakecolor</span> <span class="o">=</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">)</span>
                <span class="p">)</span>

    <span class="c1"># figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span> <span class="p">)</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<span class="c1"># USA States Plot Aggregations</span>
<div class="viewcode-block" id="plotly_agg_usa_plot"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_agg_usa_plot">[docs]</a><span class="k">def</span> <span class="nf">plotly_agg_usa_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">col_state</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span>
                            <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">colorscale</span> <span class="o">=</span> <span class="s1">&#39;Portland&#39;</span><span class="p">,</span>
                            <span class="n">reversescale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
                            <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotly map plot for different states in USA.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_state: str</span>
<span class="sd">        Name of State column.</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Name of Value column.eg. HappinessScore</span>
<span class="sd">    xlabel: str</span>
<span class="sd">        X axis label name.</span>
<span class="sd">    ylabel: str</span>
<span class="sd">        Y axis label name.</span>
<span class="sd">    ylim: list</span>
<span class="sd">        Y-axis limit. eg. [0,22]</span>
<span class="sd">    colorscale: str</span>
<span class="sd">        Valid plotly colorscale name.</span>
<span class="sd">        The default colorscale is ‘RdBu’.</span>
<span class="sd">        https://plot.ly/python/builtin-colorscales/</span>
<span class="sd">        One of the following colorscales:</span>
<span class="sd">        [&#39;Reds&#39;,&#39;Greens&#39;,&#39;Blues&#39;,&#39;Greys&#39;,</span>
<span class="sd">        &#39;Viridis&#39;,&#39;Earth&#39;,&#39;Rainbow&#39;,</span>
<span class="sd">        &#39;Blackbody&#39;,&#39;Bluered&#39;,&#39;Electric&#39;,</span>
<span class="sd">        &#39;Hot&#39;,&#39;Jet&#39;,</span>
<span class="sd">        &#39;Picnic&#39;,&#39;Portland&#39;,</span>
<span class="sd">        &#39;RdBu&#39;,&#39;YlGnBu&#39;,&#39;YlOrRd&#39;]</span>
<span class="sd">    reversescale: bool</span>
<span class="sd">        Whether or not to reverse the colorscale.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>


<span class="sd">    Example</span>
<span class="sd">    --------</span>
<span class="sd">    df = pd.DataFrame({&#39;state&#39;: [&#39;NY&#39;, &#39;OH&#39;,&#39;MI&#39;,&#39;CA&#39;,&#39;TX&#39;],</span>
<span class="sd">                        &#39;value&#39;: [100,200,300,400,500]})</span>

<span class="sd">    plotly_agg_usa_plot(df,&#39;state&#39;,&#39;value&#39;,width=600)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># title</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">col_value</span> <span class="o">+</span> <span class="s1">&#39; per State&#39;</span>


    <span class="n">aggs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span><span class="s2">&quot;avg&quot;</span><span class="p">,</span><span class="s2">&quot;median&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rms&quot;</span><span class="p">,</span><span class="s2">&quot;stddev&quot;</span><span class="p">,</span><span class="s2">&quot;min&quot;</span><span class="p">,</span><span class="s2">&quot;max&quot;</span><span class="p">,</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;last&quot;</span><span class="p">]</span>

    <span class="n">agg</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">agg_func</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">aggs</span><span class="p">)):</span>
        <span class="n">agg</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;transforms[0].aggregations[0].func&#39;</span><span class="p">,</span> <span class="n">aggs</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span>
            <span class="n">label</span><span class="o">=</span><span class="n">aggs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;restyle&#39;</span>
        <span class="p">)</span>
        <span class="n">agg_func</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
            <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;choropleth&#39;</span><span class="p">,</span>
            <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
            <span class="n">locations</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_state</span><span class="p">],</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_value</span><span class="p">],</span>
            <span class="n">autocolorscale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">colorscale</span> <span class="o">=</span> <span class="n">colorscale</span><span class="p">,</span>
            <span class="n">reversescale</span> <span class="o">=</span> <span class="n">reversescale</span><span class="p">,</span>
            <span class="n">showcolorbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;aggregate&#39;</span><span class="p">,</span>
                <span class="n">groups</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_state</span><span class="p">],</span>
                <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span>
                    <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span>
                    <span class="n">enabled</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)]</span>
    <span class="p">)]</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
        <span class="n">xaxis</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">xlabel</span><span class="p">),</span>
        <span class="n">yaxis</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">ylabel</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">),</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span>
        <span class="n">updatemenus</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mf">1.15</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="mf">1.15</span><span class="p">,</span>
            <span class="n">xref</span> <span class="o">=</span> <span class="s1">&#39;paper&#39;</span><span class="p">,</span><span class="n">yref</span> <span class="o">=</span> <span class="s1">&#39;paper&#39;</span><span class="p">,</span>
            <span class="n">yanchor</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span><span class="n">active</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">showactive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">agg_func</span>
        <span class="p">)],</span>
        <span class="n">geo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">showframe</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">scope</span> <span class="o">=</span> <span class="s1">&#39;usa&#39;</span><span class="p">,</span>
            <span class="n">showcoastlines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">showlakes</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">lakecolor</span> <span class="o">=</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">,</span>
            <span class="n">projection</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;albers usa&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>


    <span class="c1"># figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span><span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="n">layout</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="plotly_usa_bubble_map"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_usa_bubble_map">[docs]</a><span class="k">def</span> <span class="nf">plotly_usa_bubble_map</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span><span class="n">col_lat</span><span class="p">,</span><span class="n">col_lon</span><span class="p">,</span>
        <span class="n">limits</span><span class="p">,</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
        <span class="n">col_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotly map plot for different states of USA.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Name of Value column. e.g. mean_salary</span>
<span class="sd">    col_lat: str</span>
<span class="sd">        Name of Latitude column. eg. lat</span>
<span class="sd">    col_lon: str</span>
<span class="sd">        Name of Longitude column. e.g. long</span>
<span class="sd">    limits: list</span>
<span class="sd">        List of limits.</span>
<span class="sd">    scale: int</span>
<span class="sd">        Scale of limit.</span>
<span class="sd">    col_text: str</span>
<span class="sd">        Name of Text column.</span>
<span class="sd">    colors: list</span>
<span class="sd">        List of colors for limits.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>

<span class="sd">    Example 1</span>
<span class="sd">    -----------</span>
<span class="sd">    df = pd.read_csv(&#39;https://raw.githubusercontent.com/plotly/datasets/master/2014_us_cities.csv&#39;)</span>


<span class="sd">    df[&#39;text&#39;] = df[&#39;name&#39;] + &#39;&lt;br&gt;Population &#39; +\</span>
<span class="sd">                    (df[&#39;pop&#39;]/1e6).astype(str)+&#39; million&#39;</span>

<span class="sd">    limits = [(0,2),(3,10),(11,20),(21,50),(50,3000)]</span>
<span class="sd">    colors = [&quot;royalblue&quot;,&quot;crimson&quot;,&quot;lightseagreen&quot;,</span>
<span class="sd">                &quot;orange&quot;,&quot;lightgrey&quot;]</span>


<span class="sd">    plotly_usa_bubble_map(df,&#39;pop&#39;,&#39;lat&#39;,&#39;lon&#39;,</span>
<span class="sd">            limits,colors,</span>
<span class="sd">            scale=5000,</span>
<span class="sd">            col_text=&#39;text&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># title</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">col_value</span>
    <span class="c1"># text</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">col_text</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_state</span><span class="p">]</span>

    <span class="n">cities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">limits</span><span class="p">)):</span>
        <span class="n">lim</span> <span class="o">=</span> <span class="n">limits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">df_sub</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scattergeo</span><span class="p">(</span>
            <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">df_sub</span><span class="p">[</span><span class="n">col_lon</span><span class="p">],</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">df_sub</span><span class="p">[</span><span class="n">col_lat</span><span class="p">],</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">df_sub</span><span class="p">[</span><span class="n">col_text</span><span class="p">],</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span> <span class="o">=</span> <span class="n">df_sub</span><span class="p">[</span><span class="n">col_value</span><span class="p">]</span><span class="o">/</span><span class="n">scale</span><span class="p">,</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">line_color</span><span class="o">=</span><span class="s1">&#39;rgb(40,40,40)&#39;</span><span class="p">,</span>
                <span class="n">line_width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">sizemode</span> <span class="o">=</span> <span class="s1">&#39;area&#39;</span>
            <span class="p">),</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> - </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span>
            <span class="n">title_text</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
            <span class="n">showlegend</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">geo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">scope</span> <span class="o">=</span> <span class="s1">&#39;usa&#39;</span><span class="p">,</span>
                <span class="n">landcolor</span> <span class="o">=</span> <span class="s1">&#39;rgb(217, 217, 217)&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<span class="c1">#================================= Countries Plot ===================</span>
<span class="c1"># Country Plot</span>
<div class="viewcode-block" id="plotly_country_plot"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_country_plot">[docs]</a><span class="k">def</span> <span class="nf">plotly_country_plot</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span><span class="n">col_country</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span>
                            <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Portland&#39;</span><span class="p">,</span>
                            <span class="n">reversescale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
                            <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotly map plot for different countries.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_country: str</span>
<span class="sd">        Name of Country column.</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Name of Value column.eg. HappinessScore</span>
<span class="sd">    xlabel: str</span>
<span class="sd">        X axis label name.</span>
<span class="sd">    ylabel: str</span>
<span class="sd">        Y axis label name.</span>
<span class="sd">    ylim: list</span>
<span class="sd">        Y-axis limit. eg. [0,22]</span>
<span class="sd">    colorscale: str</span>
<span class="sd">        Valid plotly colorscale name.</span>
<span class="sd">        The default colorscale is ‘RdBu’.</span>
<span class="sd">        https://plot.ly/python/builtin-colorscales/</span>
<span class="sd">        One of the following colorscales:</span>
<span class="sd">        [&#39;Reds&#39;,&#39;Greens&#39;,&#39;Blues&#39;,&#39;Greys&#39;,</span>
<span class="sd">        &#39;Viridis&#39;,&#39;Earth&#39;,&#39;Rainbow&#39;,</span>
<span class="sd">        &#39;Blackbody&#39;,&#39;Bluered&#39;,&#39;Electric&#39;,</span>
<span class="sd">        &#39;Hot&#39;,&#39;Jet&#39;,</span>
<span class="sd">        &#39;Picnic&#39;,&#39;Portland&#39;,</span>
<span class="sd">        &#39;RdBu&#39;,&#39;YlGnBu&#39;,&#39;YlOrRd&#39;]</span>
<span class="sd">    reversescale: bool</span>
<span class="sd">        Whether or not to reverse the colorscale.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>


<span class="sd">    Example 1</span>
<span class="sd">    -----------</span>
<span class="sd">    df1 = pd.DataFrame({&#39;country&#39;: [&#39;USA&#39;, &#39;Canada&#39;,&#39;China&#39;,&#39;Russia&#39;,&#39;Brazil&#39;],</span>
<span class="sd">                        &#39;count&#39;: [100,200,300,400,500]})</span>

<span class="sd">    Example 2</span>
<span class="sd">    -----------</span>
<span class="sd">    df1 = df[&#39;Year&#39;].groupby(df[&#39;Birth Country&#39;]).count().reset_index()</span>
<span class="sd">                    .sort_values(&#39;Year&#39;, ascending = False)</span>

<span class="sd">    Example 3</span>
<span class="sd">    -------------</span>
<span class="sd">    note: production_countries = [&#39;USA&#39;,&#39;Japan&#39;], [], [&#39;Brazil&#39;] etc</span>
<span class="sd">        i.e. the column has list instead of direct country names.</span>

<span class="sd">    import itertools</span>
<span class="sd">    df1 = (pd.Series(list(itertools.chain.from_iterable(movie[&#39;production_countries&#39;])))</span>
<span class="sd">            .value_counts()</span>
<span class="sd">            .reset_index()</span>
<span class="sd">            .rename(columns={&#39;index&#39;:&#39;country&#39;, 0:&#39;num_movies&#39;})</span>
<span class="sd">            )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># assertions</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">200</span>

    <span class="c1"># title</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">col_value</span> <span class="o">+</span> <span class="s1">&#39; per Country&#39;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="nb">type</span>           <span class="o">=</span> <span class="s1">&#39;choropleth&#39;</span><span class="p">,</span>
            <span class="n">locations</span>      <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">col_country</span><span class="p">],</span>
            <span class="n">locationmode</span>   <span class="o">=</span> <span class="s1">&#39;country names&#39;</span><span class="p">,</span>
            <span class="n">z</span>              <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">col_value</span><span class="p">],</span>
            <span class="n">text</span>           <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">col_country</span><span class="p">],</span>
            <span class="n">colorscale</span>     <span class="o">=</span> <span class="n">colorscale</span><span class="p">,</span>
            <span class="n">autocolorscale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">reversescale</span>   <span class="o">=</span> <span class="n">reversescale</span><span class="p">,</span>
        <span class="p">)</span> <span class="p">]</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span>  <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
        <span class="n">xaxis</span>  <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">xlabel</span><span class="p">),</span>
        <span class="n">yaxis</span>  <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">ylabel</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">),</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span>
        <span class="n">width</span>  <span class="o">=</span> <span class="n">width</span><span class="p">,</span>
        <span class="n">geo</span>    <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">showframe</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span><span class="n">showcoastlines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">projection</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;mercator&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span> <span class="p">)</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>
<span class="c1">#================================= map plot with agg ===========</span>
<span class="c1"># Country Plot Aggregations</span>
<div class="viewcode-block" id="plotly_agg_country_plot"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_agg_country_plot">[docs]</a><span class="k">def</span> <span class="nf">plotly_agg_country_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">col_country</span><span class="p">,</span><span class="n">col_value</span><span class="p">,</span>
                            <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Portland&#39;</span><span class="p">,</span>
                            <span class="n">reversescale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
                            <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotly map plot for different countries.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    col_country: str</span>
<span class="sd">        Name of Country column.</span>
<span class="sd">    col_value: str</span>
<span class="sd">        Name of Value column.eg. HappinessScore</span>
<span class="sd">    xlabel: str</span>
<span class="sd">        X axis label name.</span>
<span class="sd">    ylabel: str</span>
<span class="sd">        Y axis label name.</span>
<span class="sd">    ylim: list</span>
<span class="sd">        Y-axis limit. eg. [0,22]</span>
<span class="sd">    colorscale: str</span>
<span class="sd">        Valid plotly colorscale name.</span>
<span class="sd">        The default colorscale is ‘RdBu’.</span>
<span class="sd">        https://plot.ly/python/builtin-colorscales/</span>
<span class="sd">        One of the following colorscales:</span>
<span class="sd">        [&#39;Reds&#39;,&#39;Greens&#39;,&#39;Blues&#39;,&#39;Greys&#39;,</span>
<span class="sd">        &#39;Viridis&#39;,&#39;Earth&#39;,&#39;Rainbow&#39;,</span>
<span class="sd">        &#39;Blackbody&#39;,&#39;Bluered&#39;,&#39;Electric&#39;,</span>
<span class="sd">        &#39;Hot&#39;,&#39;Jet&#39;,</span>
<span class="sd">        &#39;Picnic&#39;,&#39;Portland&#39;,</span>
<span class="sd">        &#39;RdBu&#39;,&#39;YlGnBu&#39;,&#39;YlOrRd&#39;]</span>
<span class="sd">    reversescale: bool</span>
<span class="sd">        Whether or not to reverse the colorscale.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>


<span class="sd">    Example</span>
<span class="sd">    --------</span>
<span class="sd">    df = pd.read_csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/worldhappiness.csv&quot;)</span>
<span class="sd">    plotly_agg_country_plot(df,&#39;Country&#39;,&#39;HappinessScore&#39;,width=600)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># title</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">col_value</span> <span class="o">+</span> <span class="s1">&#39; per Country&#39;</span>

    <span class="n">aggs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span><span class="s2">&quot;avg&quot;</span><span class="p">,</span><span class="s2">&quot;median&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rms&quot;</span><span class="p">,</span><span class="s2">&quot;stddev&quot;</span><span class="p">,</span><span class="s2">&quot;min&quot;</span><span class="p">,</span><span class="s2">&quot;max&quot;</span><span class="p">,</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;last&quot;</span><span class="p">]</span>

    <span class="n">agg</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">agg_func</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">aggs</span><span class="p">)):</span>
        <span class="n">agg</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;transforms[0].aggregations[0].func&#39;</span><span class="p">,</span> <span class="n">aggs</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span>
            <span class="n">label</span><span class="o">=</span><span class="n">aggs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;restyle&#39;</span>
        <span class="p">)</span>
        <span class="n">agg_func</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;choropleth&#39;</span><span class="p">,</span>
        <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;country names&#39;</span><span class="p">,</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_country</span><span class="p">],</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_value</span><span class="p">],</span>
        <span class="n">autocolorscale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">colorscale</span> <span class="o">=</span> <span class="n">colorscale</span><span class="p">,</span>
        <span class="n">reversescale</span> <span class="o">=</span> <span class="n">reversescale</span><span class="p">,</span>
        <span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;aggregate&#39;</span><span class="p">,</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_country</span><span class="p">],</span>
        <span class="n">aggregations</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
            <span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">enabled</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="p">)]</span>
    <span class="p">)]</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
        <span class="n">xaxis</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">xlabel</span><span class="p">),</span>
        <span class="n">yaxis</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">ylabel</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">),</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span>
        <span class="n">updatemenus</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mf">1.15</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="mf">1.15</span><span class="p">,</span>
            <span class="n">xref</span> <span class="o">=</span> <span class="s1">&#39;paper&#39;</span><span class="p">,</span><span class="n">yref</span> <span class="o">=</span> <span class="s1">&#39;paper&#39;</span><span class="p">,</span>
            <span class="n">yanchor</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span><span class="n">active</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">showactive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">agg_func</span>
        <span class="p">)]</span>
    <span class="p">)</span>

    <span class="c1"># figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span><span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="n">layout</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<span class="c1">#========================= mapbox</span>
<div class="viewcode-block" id="get_mapbox_access_token"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.get_mapbox_access_token">[docs]</a><span class="k">def</span> <span class="nf">get_mapbox_access_token</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">import</span> <span class="nn">os</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39;/.mapbox_tokens.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fi</span><span class="p">:</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>

    <span class="n">mapbox_access_token</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;token1&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">mapbox_access_token</span></div>

<div class="viewcode-block" id="plotly_mapbox"><a class="viewcode-back" href="../../bhishan.html#bhishan.plot_map.plotly_mapbox">[docs]</a><span class="k">def</span> <span class="nf">plotly_mapbox</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">lat_col</span><span class="p">,</span> <span class="n">lon_col</span><span class="p">,</span> <span class="n">color_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Map&#39;</span><span class="p">,</span>
                <span class="n">marker_size</span><span class="o">=</span><span class="mf">4.5</span><span class="p">,</span><span class="n">zoom</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
                <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Map plot using mapbox.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    df1: pandas.DataFrame</span>
<span class="sd">        Input data.</span>
<span class="sd">    lat_col: str</span>
<span class="sd">        Name of latitude column.</span>
<span class="sd">    lon_col: str</span>
<span class="sd">        Name of longitude column.</span>
<span class="sd">    color_col: str</span>
<span class="sd">        Name of color column.</span>
<span class="sd">    text_col: str</span>
<span class="sd">        Name of text column.</span>
<span class="sd">    title: str</span>
<span class="sd">        Title of the plot.</span>
<span class="sd">    marker_size: int</span>
<span class="sd">        Size of the marker.</span>
<span class="sd">    zoom: int</span>
<span class="sd">        Zoom the map.</span>
<span class="sd">    width: int</span>
<span class="sd">        Width of the map.</span>
<span class="sd">    height: int</span>
<span class="sd">        Height of the map.</span>
<span class="sd">    ofile: str</span>
<span class="sd">        Name of the output file.</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not to show the rendered html in notebook.</span>
<span class="sd">    auto_open: bool</span>
<span class="sd">        Whether or not to automatically open the ouput html file.</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mapbox_access_token</span> <span class="o">=</span> <span class="n">get_mapbox_access_token</span><span class="p">()</span>

    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">color_col</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">color_col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
        <span class="n">ncolors</span> <span class="o">=</span> <span class="n">get_distinct_colors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">unq</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">color_col</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span><span class="n">unq</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="n">ncolors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)}</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">color_col</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">text_col</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">text_col</span><span class="p">]</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">color_col</span> <span class="ow">and</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">df1</span><span class="p">[</span><span class="n">lat_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">df1</span><span class="p">[</span><span class="n">lon_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span>\
               <span class="s1">&#39;) &#39;</span> <span class="o">+</span> <span class="n">color_col</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">df1</span><span class="p">[</span><span class="n">color_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">lat_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">df1</span><span class="p">[</span><span class="n">lon_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>


    <span class="n">lat</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">lat_col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="n">lon_col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="n">trace0</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scattermapbox</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span>
                            <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span>
                            <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">marker_size</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span> <span class="n">color</span><span class="p">)</span> <span class="p">,</span>
                            <span class="n">hoverinfo</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
                            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">hovermode</span><span class="o">=</span><span class="s2">&quot;closest&quot;</span><span class="p">,</span>
        <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">mapbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">bearing</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">pitch</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span>
                    <span class="n">center</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">df1</span><span class="p">[</span><span class="n">lat_col</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
                                <span class="n">lon</span><span class="o">=</span><span class="n">df1</span><span class="p">[</span><span class="n">lon_col</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()),</span>
                                <span class="n">accesstoken</span><span class="o">=</span><span class="n">mapbox_access_token</span><span class="p">))</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace0</span><span class="p">]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

    <span class="n">markdown_html</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;&quot;&quot;&lt;span style=&quot;background:</span><span class="si">{}</span><span class="s2">&quot;&gt; </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> &lt;/span&gt;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ncolors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color_col</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="n">unq</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)])</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">markdown_html</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ofile</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">ofile</span><span class="p">,</span><span class="n">auto_open</span><span class="o">=</span><span class="n">auto_open</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Bhishan 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Bhishan Poudel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.
    </div>
  </body>
</html>